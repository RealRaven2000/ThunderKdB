<!DOCTYPE html>
<html lang="en">

<head>
	<title>Extension Browser</title>
	<style>
		@import url('https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed|Roboto+Mono&display=swap');
		body {
			font-family: 'Roboto';
		}
	</style>
	<link rel="stylesheet" href="./css/xpi-search.css" />
	<link rel="stylesheet" href="./css/gh-buttons.css" />
</head>

<body>

	<div class="search-banner">
		<img class="banner-image" src='./images/Thunderbird-Banner.png'
			style="padding-right: 60px; height: 40px; width: 170px" />
		<label class="banner-header">xpiLib Extension Browser</label>
		<label class="banner-header-rt">(2019-09-24)</label>
	</div>

	<hr>
	<br>

	<h2 class="search-section1">Extension File/Issue Search:</h2>

	<div class="search-grid2">
		<label class="search-label">Topic (s) :</label>
		<input id="topic" type=" text" class="search-field search-input" />
		<button id="search-button" type="button" class="search-input-col button icon btn-primary search" onclick="search_exts()">Search</button>
		<label class="search-options-hdr-label">Options</label>
		<label class="search-options-label">File Types : </label>
		<select id="file_types" class="search-field search-select">
			<option value="">All xpiLib Files</option>
			<option value="extension:js+extension:jsm">Javascript (.js, .jsm)</option>
			<option value="extension:xul">XUL</option>
			<option value="extension:html+extension:xhtml">HTML, XHTML</option>
			<option value="extension:dtd+extension:properties">dtd, properties</option>

		</select>
		<label class="search-options-label grid-label-top">Compatibility : </label>
		<div class="search-field">
			<table>
			<tr>
			<td width="24px"> <input id="comp_all" type="checkbox" class="search-field search-checkbox" checked="true" disabled="false"/></td>
			<td width="80px"><div class="search-field-subitem1">All </div></td>
			
			<td width="24px"><input id="comp_tb68" type="checkbox" class="search-field search-checkbox" checked="false"/></td>
			<td width="100%"><label class="search-field-subitem2">Thunderbird 68</label></td>
		</tr>
		<tr>
				<td width="24px"> <input id="comp_all" type="checkbox" class="ehidden search-field search-checkbox" /></td>
				<td width="80px"><div class="ehidden search-field-subitem1">All </div></td>
				
				<td width="24px"><input id="comp_tb60" type="checkbox" class="search-field search-checkbox" /></td>
				<td width="100%"><label class="search-field-subitem2">Thunderbird 60</label></td>
			</tr>

			<tr>
				<td width="24px"> <input id="x" type="checkbox" class="ehidden search-field search-checkbox" /></td>
				<td width="80px"><div class="ehidden search-field-subitem1"></div></td>
				
				<td width="24px"><input id="thundernest" type="checkbox" class="search-field search-checkbox" /></td>
				<td width="100%"><label class="search-field-subitem2">ThunderNest</label></td>
			</tr>

			
		</table>
		</div>

	<!-- 
		<div class="search-field">
				<label class="search-field-subitem1 ehidden">All</label>
				<input id="comp_all2" type="checkbox" class="ehidden search-field search-checkbox" />
				<label class="search-field-subitem2">Thunderbird 60</label>
				<input id="comp_tb60" type="checkbox" class="search-field search-checkbox" />
	
			</div>
	
 -->
		<!-- 
		<div>
				<label class="search-field">Thunderbird 60</label>
				<input id="comp_tb60" type="checkbox" class="search-field search-checkbox" />
			</div>
 -->
	</div>

	<br>
	<br>
	<!-- 
	<span>Search DXR: </span><input type="checkbox" id="search_dxr" />
	<span>Search Bugzill: </span><input type="checkbox" id="search_bugzilla" />
 -->

	<h2 class="search-section1">Locale Files Search:</h2>

	<div class="search-grid">
		<label class="search-label">Word (s) :</label>
		<input id="locale_topic" type=" text" class="search-field search-input" />
		<button id="locale_topic_btn" type="button" onclick="search_exts_locales()" class="search-input-col button icon btn-primary search" onclick="search_exts()">Search</button>

	</div>

	<script>
		function search_exts() {
			console.debug('test' + document.getElementById('topic').value);
			let q = document.getElementById('topic').value;
			// q += "+extension:js+extension:xul";
			q += '+' + document.getElementById('file_types').value;
			if (document.getElementById("comp_tb60").checked) {
				q += "+path:/xall/x60"
				q += "+repo%3Acleidigh%2FThunderKdB"

			}
			
			if (document.getElementById("comp_all").checked) {
				
				q += "+path:/xall"
				q += "+repo%3Acleidigh%2FThunderKdB"
				q += "+repo%3Athundernest%2Ftb-web-ext-experiments"
			}


			if (document.getElementById("comp_tb68").checked) {
				q += "+path:/xall/x68"
				q += "+repo%3Acleidigh%2FThunderKdB"

			}
			if (document.getElementById("thundernest").checked) {
				q += "+repo%3Athundernest%2Ftb-web-ext-experiments"
			}

			// window.open(`https://github.com/cleidigh/ThunderKdB/search?q=${q}`);
			window.open(`https://github.com/search?q=${q}&type=Code`)

			if (document.getElementById("search_dxr").checked) {
				console.debug('DX are checked');
				let q_dxr = q;
				// window.open(`https://dxr.mozilla.org/comm-central/source/comm/suite/themes/modern/global?q=${q_dxr}&redirect_type=direct`);
				window.open(`https://dxr.mozilla.org/comm-central/source?q=${q_dxr}`);
			}

		}

		function search_exts_locales() {
			let q = document.getElementById('locale_topic').value;
			window.open(`https://github.com/cleidigh/ThunderKdB/search?q=${q}+extension:dtd+extension:properties+extension:json`);


		}

	</script>
</body>

</html>